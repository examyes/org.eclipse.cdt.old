<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=ISO-8859-1">
  <meta name="GENERATOR" content="IBM WebSphere Studio">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <link href="theme/Master.css" rel="stylesheet" type="text/css">
  <title>Managed Build System Extensibility Document</title>
  <link rel="stylesheet"
 href="http://dev.eclipse.org/viewcvs/index.cgi/%7Echeckout%7E/cdt-home/cdt.css?cvsroot=Tools_Project"
 type="text/css">
</head>
<body>
<!-- Document Header -->
<table cellpadding="2" width="100%" border="0">
  <tbody>
    <tr>
      <td align="left" width="72%"><font class="indextop">Managed Build
System Extensibility Document</font><br>
      <font class="indexsub">This document describes the design of the
managed build system and how to extend it.</font></td>
      <td width="28%"><img height="86"
 src="http://dev.eclipse.org/images/Idea.jpg" width="120" alt=""></td>
    </tr>
  </tbody>
</table>
<table>
  <tbody>
    <tr>
      <td>Author</td>
      <td>: <a href="mailto:sevoy@ca.ibm.com">Sean Evoy</a></td>
    </tr>
    <tr>
      <td>Revision Date</td>
      <td>: 10/21/2003 - Version: 0.1.0</td>
    </tr>
    <tr>
      <td>Change History</td>
      <td>: 0.1.0 - Document Creation</td>
    </tr>
  </tbody>
</table>
<br>
<!-- End of Document Header --><!-- Table of Contents -->
<div class="section">Table of Contents</div>
<br>
<div class="indent"><a href="#_TocSection1">1 Introduction</a>
<div class="indent"><a href="#_TocSection1_1">1.1 Who Needs This
Information</a></div>
<div class="indent"><a href="#_TocSection1_2">1.2 Managed Build System
Overview</a></div>
<div class="indent"><a href="#_TocSection1_3">1.3 The Standard Build
System</a></div>
</div>
<div class="indent"><a href="#_TocSection2">2 Build Model Grammar
Elements</a>
<div class="indent"><a href="#_TocSection2_1">2.1 Model</a></div>
<div class="indent"><a href="#_TocSection2_2">2.2 Target</a></div>
<div class="indent"><a href="#_TocSection2_3">2.3 Tool</a></div>
<div class="indent"><a href="#_TocSection2_4">2.4 Option Category</a></div>
<div class="indent"><a href="#_TocSection2_5">2.5 Configuration</a></div>
<div class="indent"><a href="#_TocSection2_6">2.6 Tool Reference</a></div>
<div class="indent"><a href="#_TocSection2_7">2.7 Option</a></div>
<div class="indent"><a href="#_TocSection2_8">2.8 Option Reference</a></div>
<div class="indent"><a href="#_TocSection2_9">2.9 List Option Value</a></div>
<div class="indent"><a href="#_TocSection2_10">2.10 Enumerated Option
Value</a></div>
</div>
<div class="indent"><a href="#_TocSection3">3 UI Representation</a>
<div class="indent"><a href="#_TocSection3_1">3.1 New Project Wizard</a></div>
<div class="indent"><a href="#_TocSection3_2">3.2 Build Property Page</a></div>
</div>
<div class="indent"><a href="#_TocSection4">4 Makefile Generation</a>
<div class="indent"><a href="#_TocSection4_1">4.1 Main Makefile</a></div>
<div class="indent"><a href="#_TocSection4_2">4.2 Makefile Fragments</a></div>
<div class="indent"><a href="#_TocSection4_3">4.3 Dependency Makefile
Fragments</a></div>
<div class="indent"><a href="#_TocSection4_4">4.4 Inter-Project
Dependencies</a></div>
</div>
<div class="indent"><a href="#_TocSection5">5 Tutorial: An Example Tool
Chain</a>
<div class="indent"><a href="#_TocSection5_1">5.1 Setting up your
Environment</a></div>
<div class="indent"><a href="#_TocSection5_2">5.2 Creating your Plug-in
Project</a></div>
<div class="indent"><a href="#_TocSection5_3">5.3 Creating the Extension</a></div>
<div class="indent"><a href="#_TocSection5_4">5.4 Adding a Target</a></div>
<div class="indent"><a href="#_TocSection5_5">5.5 Adding a Configuration</a></div>
<div class="indent"><a href="#_TocSection5_6">5.6 Adding a Tool</a></div>
<div class="indent"><a href="#_TocSection5_7">5.7 Testing the Target</a></div>
<div class="indent"><a href="#_TocSection5_8">5.8 Adding Tool Options</a></div>
<div class="indent"><a href="#_TocSection5_9">5.9 Taking the Next Step</a></div>
</div>
<!-- End of Table of Contents --><br>
<p class="section"><a name="_TocSection1">1 Introduction</a></p>
<p>C and C++ developers are a diverse group. The tools they use, the
processes they follow, and the level of support they expect from their
development environments vary widely. The CDT provides a framework for
integrating those tools into Eclipse and the managed build system is
part of that framework. Understanding how the managed build system
works, and what steps are required to extend it is the focus of this
document.</p>
<p class="subsection"><a name="_TocSection1_1">1.1 Who Needs This
Information</a></p>
<p>The information in this document describes the design of the managed
build system and discusses how to add new build targets and tools to it
through the <code>ManagedBuildInfo</code> extension point. It is
intended for someone
who wants to understand how the managed build system works, or is
interested in adding their own tool chain specification to it.</p>
<p>The CDT comes configured to generate makefiles to build executables,
static libraries, and shared libraries on Cygwin, Linux, and Solaris
using Gnu tools. If you are using the CDT on those platforms, have
access to Gnu tools and find the predefined targets sufficient for your
needs, then you do not need to modify anything. Please
feel free to skip sections 2, 3, and 5 as they are primarily concerned
with adding new tool chains to the build model.</p>
<p>If you are working with tools other than Gnu, or you wish to build
for targets the CDT does not support out of the box, then you have to
decide whether you will provide your own makefile and use the standard
builder, or add a description of your target to the extension point and
let the CDT generate the makefiles for your project.</p>
<p>If you choose to add your own tools to the managed build system, it
is assumed that you are familiar with XML and the Eclipse extension
point mechanism. Having made the standard disclaimer, it should be said
that the tutorial in section 5 presents a cookbook approach to adding a
new tool specification, so you can always jump right in and refer to
the online help in the <span style="font-style: italic;">Platform
Plug-in Developer Guide</span> if you
get stuck.</p>
<p class="subsection"><a name="_TocSection1_2">1.2 Managed Build System
Overview</a></p>
<p>The managed build system consists of several components that
interact to build a project. At the core of the managed build system is
the build model. It is the central clearing house for all the
build-related information that internal and external clients require.
There are three internal clients; the user interface components, a
makefile generator that is
responsible for generating a correct makefile for a project when it is
built, and the CDT parser. The external clients are the end-user, who
interacts with the build model through the user interface, and
tool-chain
integrators who supply tool definitions to the build model. The diagram
below shows the basic set of
relationships
between these components.</p>
<p><img src="images/image002.gif" title=""
 alt="Build model logical elements"
 style="border: 0px solid ; width: 476px; height: 385px;"></p>
<h5>Figure 1 Managed build system Overview</h5>
<p class="subsection">1.2.1 External Users</p>
<p>From the perspective of the build model, there are two external
users. The first is the end-user that interacts with the build model
through the UI elements described in section 4. The UI includes a new
project wizard that asks the build model about what tools have been
defined for new projects. When the project has been created, the
project property page uses the information in the build model to
populate its display. The user can change the information associated
with the tools for a project through the property page and the build
model is responsible for saving those changes between sessions. The
second external user is the tool integrator who adds information about
their tool-chain to a plug-in
manifest as described in the tutorial in Section
5. The tool-chain integrator is the primary audience for this document.
</p>
<p class="subsection">1.2.2 Internal Users</p>
<p>There are three internal clients of the information in the managed
build system. The first is the makefile generator that creates a
correct makefile for a project based on the tools and settings defined
for the project in the build system. The second is the built-in CDT
parser that relies on the build system to tell it about the include
paths and defined preprocessor symbols for a given project so that it
can properly parse a file. The third client is the UI component of the
build system that queries the build model for the tools and options
defined for a project to build its display and store the user settings.
</p>
<p class="subsection">1.2.3 Tool Definitions and Settings Storage</p>
A key feature of the managed build system is that it is extensible.
Tool integrators
can use the grammar, described in Section 2, to add
their own tools to the
build system. The same grammar is used to save the settings that the
user overrides through the UI between sessions.
<p class="subsection"><a name="_TocSection1_3">1.3 The Standard Build
System</a></p>
<p>There is also a standard build system supplied as part
of the CDT framework that is unrelated to the managed build system. The
standard system provides a small set of tools to build a user&#8217;s
projects. The user is expected to supply a makefile which includes
enough information to build their project. The UI allows the user to
switch between targets defined in the makefile, like clean or all, and
for the user to enter the information the parser requires.</p>
<p>The decision to use the standard or managed build system is a
trade-off. For users with an existing project that already has a set of
working makefiles, or for users that prefer to write their own
makefile,
the standard system may be perfect. However, many users are
uncomfortable writing makefiles, so the standard system may present a
barrier to adoption for them.</p>
<p class="section"><a name="_TocSection2">2 Build Model Grammar Elements</a></p>
<p>The managed build system defines a grammar to describe tool chain
information. This information is used to store invariant data, like the
command line invocation for a specific compiler, for example. The build
system also stores user settings between sessions, like the level of
debugging information that is needed for a particular build
configuration. The following section describes the format of the
grammar
and what the information is used for by the build model.</p>
<p class="subsection"><a name="_TocSection2_1">2.1 Model</a></p>
<p>The figure below shows a UML model of schema elements. </p>
<p><img style="border: 0px solid ; width: 640px; height: 528px;"
 src="images/image004.gif" title="" alt="UML model of schema elements"></p>
<h5>Figure 2 Managed build model elements</h5>
<p class="subsection"><a name="_TocSection2_2">2.2 Target</a></p>
<p>In its current implementation, the <span style="font-style: italic;">target</span>
in the build model
is
confusing because it encompasses the responsibilities of two distinct
participants in a build. The first is the host target where the build
tools are located. The information that this type of target needs to
managed are things like the command to start the make utility, to
remove files, and to invoke build tools. The second is the physical
target that the build artifact is supposed to run on, which may or may
not be the same as the host target. This distinction will be clarified
in the next iteration of the build model. <br>
</p>
<p>Targets can be arranged into hierarchies to promote the efficient
sharing of tools and configurations. If you have defined a target that
should not be selected by the user, but is a root for other targets, it
may be declared abstract by setting the <var>isAbstract</var>
attribute
to <code>true</code>. Abstract targets do not appear in the UI. You
must provide a
unique identifier for the target in the <var>id</var> attribute. The
build model uses this information to distinguish between the target
definitions it finds. Children of the abstract target will have the
same
tools and configurations the abstract target has. For these children to
function properly, their parent attribute must contain the unique
identifier of the parent target.</p>
<p>A concrete target must have at least one configuration defined for
it. A target must also define (or inherit) a set of tool definitions
that work together to produce the build goal as an output. You must
also
provide a meaningful <var>name</var> that will be displayed to the
user
in the UI and new project wizards.</p>
<p>The target defines the command needed to invoke the make utility in
the <var>makeCommand</var> attribute. Any special flags that need to
be
passed to the make utility are defined in the <var>makeFlags</var>
attribute. The command to remove files on the host machine is defined
in
the <var>cleanCommand</var> attribute.</p>
<p>Typically a build target will only be valid on a limited subset of
operating systems. For example, it does not make much sense to allow a
user to create a Solaris shared library project if they are running
Eclipse and the CDT on Windows. You can specify the operating systems
that the target is restricted to as a comma-separated list in the <var>osList</var>
attribute. At the moment, you can specify <code>win32</code>, <code>linux</code>
and <code>solaris</code> as the filters.</p>
<p>The CDT offers a facility for parsing binary files if it knows which
output format the build artifact has been produced with. The <var>binaryParser</var>
attribute must contain the id of the appropriate parser if you want
build artifacts of the target to be parsed in the workspace. There are
currently two defined binary parsers; <code>org.eclipse.cdt.core.PE</code>
for Windows artifacts, and <code>org.eclipse.cdt.core.ELF</code> for
Linux and Solaris. This information is used to set the parser when a
project is created and is not something the user can change through the
UI.</p>
<p>The target is responsible for maintaining the name of the final
build
goal. The user selects the name of the build target in the UI, and the
build model maintains it in the <var>artifactName</var> attribute. The
implementer of a tool chain should not specify this in the plug-in
manifest. However, the default extension for the target can be
specified
using the <var>defaultExtension</var> attribute.</p>
<p class="subsection">2.2.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="123" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 92.15pt;">
      <p>Attribute</p>
      </td>
      <td width="369" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>Description</p>
      </td>
      <td width="84" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>artifactName</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The name of the build goal defined by the target. This is set
by the user through the UI and stored in the build model through this
attribute.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>binaryParser</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The id of the appropriate parser for the build artifact.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>cleanCommand</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The command to remove files on the build machine. You must
define this value if the target does not have a parent, or it is not
defined in the parent.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>defaultExtension</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The extension the build goal will have, for example &#8216;.exe&#8217; or
&#8216;.so&#8217;.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>id</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>A unique identifier that the model manager will use to keep
track of this specific target.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>isAbstract</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>Flags the target as abstract. An abstract target can not be
selected by the user in the UI, but children of the target will inherit
its tools and configurations.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>isTest</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>A target can be flagged for test purposes only. It can be
manipulated programmatically, in JUnit tests for example, but not
selected by the user in the UI.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>makeCommand</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The command to invoke the make utility. You must define this
value if the target does not have a parent, or it is not defined in the
parent.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>makeFlags</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The default flags passed to the make utility on the command
line.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>name</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The name for the target that is displayed to the user in the
UI.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>osList</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>A comma-separated list of operating systems that the target is
valid for.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="123" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 92.15pt;">
      <p>parent</p>
      </td>
      <td width="369" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 276.85pt;">
      <p>The unique ID of the parent of the target.</p>
      </td>
      <td width="84" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 63pt;">
      <p>no</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.2.2 Example</p>
<p>The example below shows a target definition called &#8216;Executable&#8217;.
Tool
and configuration information will be added to our definition is later
sections.</p>
<p><img style="border: 0px solid ; width: 334px; height: 220px;"
 src="images/image006.gif" title=""
 alt="An XML fragment containing a Target specification"></p>
<p class="subsection"><a name="_TocSection2_3">2.3 Tool</a></p>
<p>A tool represents some sort of executable component that can take a
set of inputs and produce a set of outputs. A tool must have a unique <var>id</var>
for the build model, and a <var>name</var> that is displayed to a user
through the UI.</p>
<p>Certain tools logically belong to certain kinds of projects. For
example, the Gnu compiler is invoked differently for C and C++ source
files. You can specify a filter for a tool based on the nature of a
project using the <var>natureFilter</var> attribute. When a new C
project is created, a <code>cnature</code> is added to it. New C++
projects have both a <code>cnature</code> and <code>ccnature</code>.
The
build model interprets the filter as follows. If you specify a <code>cnature</code>
filter, then the tool will only be displayed if the project has a <code>cnature</code>
and does <span style="font-style: italic;">not</span> have a <code>ccnature</code>.
If you specify a <code>ccnature</code>
filter, then the tool will be displayed if the project has a <code>ccnature</code>.
The default if no filter is specified is to display the tool for all
projects.</p>
<p>Tools can be added to the plug-in manifest as part of a target or as
a stand-alone
specification. Tools defined as part of a target will be available for
projects that are created to build for the target or any child of the
target in which the tool is defined. If you want targets o use a tool
that is not specified as belonging to it, you must create a reference
to the tool in the target specification. Please refer to section 2.6
for a description of how to use tool references in your plug-in
manifest.</p>
<p>Tools can define a set of input file extensions in the <var>sources</var>
attribute. This indicates that a tool will build for those and only
those file types. Similarly, a tool might specify a set of file
extensions that they will produce in the <var>outputs</var> attributes.</p>
<p>Each tool specifies a <var>command</var> that will be placed in the
makefile during the makefile generation stage of building. Two optional
flags control how the command is generated. If the tool requires a
special output flag, such as <code>-o</code> for a compiler or linker,
the
implementer must specify that in the <var>outputFlag</var> attribute.
If
the output of the tool usually has a special prefix, like the prefix
<code>lib</code> for libraries on POSIX systems, the implementer must
specify this
in the <var>outputPrefix</var> attribute.</p>
<p>One of the clients of the information in the build model is the
makefile generator. It must track the dependencies between elements in
the workspace, and to do that, it needs to know if a file is a header
or
a source file. Currently, the build model uses the list of file
extensions specified in the <var>headerExtensions</var> attribute to
identify a file as containing an interface.</p>
<p class="subsection">2.3.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A unique identifier for the tool that will be used by the
build model.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>name</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Human-readable name for the tool to be used in the UI.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>sources</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A comma-separated list of file extensions that the tool will
produce output for.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>outputs</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The extension that the tool will produce from a given input.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>command</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The command that invokes the tool. For example, gcc for the
Gnu C compiler, or g++ for the Gnu C++ compiler.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>outputFlag</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>An optional flag for tools that allow users to specify a name
for the artifact of the tool. For example, the GCC compiler and linker
tools typically allow the user to specify the name of the output with
the '-o' flag, whereas the archiver that creates libraries does not.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>outputPrefix</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Some tools produce files with a special prefix that must be
specified. For example, a librarian on POSIX systems expects the output
to be lib.a so 'lib' would be the prefix.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>dependencyCalculator</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Unused in 1.2</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>headerExtensions</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A comma-separated list of file extensions that are used for
header files by the tool chain.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>natureFilter</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Specify the project natures the tool should apply to.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.3.2 Example</p>
<p>The tool shown in the example below will appear in the UI with the
label <span style="font-style: italic;">Compiler</span>. It will be
used to build any file in the
project
with a <code>.C</code>, <code>.cc</code>, or <code>.cpp</code>
extension and will produce a file with an <code>.o</code>
extension.
When the makefile is generated, a rule will be generated with the
command <code>g++ &lt;&#8230;&gt; -o &lt;&#8230;&gt;</code>.</p>
<p><img style="border: 0px solid ; width: 462px; height: 193px;"
 src="images/image008.gif" title=""
 alt="An XML fragment containing a Tool specification"></p>
<p class="subsection"><a name="_TocSection2_4">2.4 Option Category</a></p>
<p>A tool can have a large number of options. To help organize the user
interface for these options, a hierarchical set of option categories
can
be defined. A unique identifier must be specified in the <var>id</var>
attribute. This will be used by the build model to manage the category.
The user will see the value assigned to the <var>name</var>
attribute. If the category is nested inside another category, the
unique
identifier of the higher level category must be specified in the <var>owner</var>
attribute, otherwise use the identifier of the tool
the category belongs to.</p>
<p class="subsection">2.4.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Used by the build model to uniquely identify the option
category.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>name</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A human-readable category name, such as 'Pre-processor
Options'. This will be the name the user sees displayed in the UI.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>owner</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Option categories can be nested inside other option
categories. This is the ID of the owner of the category.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.4.2 Example</p>
<p>This example shows an option category that will be displayed in the
UI with the label <span style="font-style: italic;">Flags</span>.
There are two options defined in this
category, <span style="font-style: italic;">General</span>, and <span
 style="font-style: italic;">Optimization</span>.</p>
<p><img style="border: 0px solid ; width: 328px; height: 207px;"
 src="images/image010.gif" title=""
 alt="An XML fragment containing an Option Category specification"></p>
<p class="subsection"><a name="_TocSection2_5">2.5 Configuration</a></p>
<p>A target defines the information about the tools
needed to build a project for a particular environment. Configurations
are used to pre-define and store the settings that the user specifies
for those tools.</p>
<p>A target must have at least one default configuration defined for
it.
Users can create new configurations for a project, but they must be
based
on the settings defined in a default configuration. For example, a user
may want to create a <var>Profile</var> configuration based on the
target&#8217;s
default <var>Debug</var> configuration.</p>
<p>Each configuration must have a unique identifier specified in the <var>id</var>
attribute that will be used by the build model to manage the
configuration. It must also have a <var>name</var> that will be
displayed in the UI in the build property page and new project wizards.</p>
<p class="subsection">2.5.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A unique identifier that the model manager will use to keep
track of this specific configuration.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>name</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The human-readable name that will be displayed in the UI to
identify this configuration.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.5.2 Example</p>
<p>The example below shows a configuration named <span
 style="font-style: italic;">Default</span> that
belongs to the target <span style="font-style: italic;">Executable</span>.</p>
<p><img style="border: 0px solid ; width: 255px; height: 87px;"
 src="images/image012.gif" title=""
 alt="An XML fragment containing a Configuration specification"></p>
<p class="subsection"><a name="_TocSection2_6">2.6 Tool Reference</a></p>
<p>A tool reference is primarily intended to be used when saving user
settings between sessions. When the user has overridden an option in
the
referenced tool, an option reference with the new setting is created
and
added to the tool reference.</p>
<p>Tool references are used by the build model for two distinct tasks;
because they contain option references, tool references hold onto user
settings between sessions. They can also be added to a default
configuration specification if the default settings for the tool should
be overridden. For example, a &#8216;Debug&#8217; configuration may have
optimization disabled by default, whereas a &#8216;Release&#8217; configuration may
default to the highest possible level.</p>
<p class="subsection">2.6.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The unique identifier of the tool this is a reference for.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.6.2 Example</p>
<p>The example below shows how the user has overridden the compiler
flags option in the compiler tool in the <span
 style="font-style: italic;">Default</span> configuration.</p>
<p><img style="border: 0px solid ; width: 573px; height: 74px;"
 src="images/image014.gif" title=""
 alt="An XML fragment containing a Tool Reference specifiation"></p>
<p class="subsection"><a name="_TocSection2_7">2.7 Option</a></p>
<p>Options in the build model are used to organize and maintain the
command arguments that are sent to tools during the build. Users
interact with the build model through the UI to set the value of
options. Options hold different kinds of values, so there are some
subtle, yet important, rules for how options are to be defined. These
rules are summarized in Table 1</p>
<p>Each option must have a unique <var>id</var> for the build model to
properly manage it. A descriptive <var>name</var> that will appear in
the UI must be specified. Options can be organized into categories to
keep the UI more manageable. If an option category has been defined for
the tool, and the option should be displayed as part of that category,
then the unique identifier of the option category must be specified in
the <var>category</var> attribute.</p>
<p class="subsection">2.7.1 Option Types</p>
<p>Some options contain commands to turn a feature off or on, such as
setting a flag to see descriptive messages from a tool. Others contain
lists of values, such as a set of directories to search for files.
Still
others are a single selection from a pre-determined range of choices,
like the level of debugging information to produce, or the type of
architecture to build for. The <var>valueType</var> attribute is used
to
indicate to the build model what kind of option it is.</p>
<p>Specifying the type of value an option contains is an important
design decision, since it controls how the build model treats the
contents of the option&#8217;s attributes, and just as importantly, how the
option is displayed to the user. The basic types are <code>string</code>,
<code>boolean</code>, <code>stringList</code>, and <code>enumerated</code>.
</p>
<p>There are also four specialized cases of list options, <code>includePath</code>,
<code>definedSymbols</code>, <code>libs</code>, and <code>userObjs</code>
to manage the
list of paths to search for header files, the defined preprocessor
symbols, external libraries to link against, and object module to link
in respectively.</p>
<p class="subsection">2.7.1.1 String Options</p>
<p>An option of type &#8216;string&#8217; contains a set
of values the user has typed in the UI. When the UI is created, it will
display the option using a simple entry widget. This option type is
useful for options that cannot be easily specified using lists or
enumerations, or for options that are not frequently set. For these
types of options, the build model will ignore what it finds in the <var>command</var>
attribute.</p>
<p class="subsection">2.7.1.2 Boolean Options</p>
<p>An option of type &#8216;boolean&#8217; is used to specify an option that is
either true or false. The option will be displayed to the user as a
check box. The value of the option is set true by selecting the check
box, and false by deselecting it. If true, the command associated with
the option will be passed to the tool when it is invoked. The default
value of the option will be considered when it is displayed in the UI.</p>
<p class="subsection">2.7.1.3 Enumerated Options</p>
<p>Enumerated options are displayed in the UI in a drop-down list-box.
With
enumerated options, the option definition takes on an organizational
role; the important information is stored in the enumerated option
values. Any information specified in <var>defaultValue</var> is
ignored, since the contents of the enumerated value definitions are
used
to populate the selection widget. The option answers the command of the
selected enumerated value, so any information in <var>command</var>
is also ignored.</p>
<p class="subsection">2.7.1.4 String List Options</p>
<p>String list options are displayed in the UI using a list control and
a button bar that allows users to add, remove, and reorder list items.
Elements of the list are defined and stored in list options values, as
described in section 2.9. Like enumerated options, lists ignore the
information in the <var>defaultValue</var> attribute, but unlike
the enumerated option, they treat any pre-defined list option values as
defaults. The value defined in the <var>command</var> attribute
will be applied to all the values in the list.</p>
<p class="subsection">2.7.1.4.1 Special List Options</p>
<p>There are four special cases of string list options; <code>includePaths</code>
specify the paths to search for header files, <code>definedSymbols</code>
for user-defined preprocessor defines, <code>libs</code> for libraries
that must be linked into the final build goal, and <code>userObjs</code>
for external object files that must be linked.</p>
<p>While specifying these types of options as type <var>stringList</var>
will make them appear in the UI correctly, the build model will not be
able to recognize them as special in any way. Since certain functions
of
the CDT require this information to function correctly, it is important
to flag these types of options appropriately. For example, the search
and indexing function may not perform correctly if the includes paths
and defined symbols are not set for a project. Similarly, the makefile
generator may not be able to generate dependencies correctly in the
makefile if it is
unaware that there are libraries and external object files that
participate in
the final build step.</p>
<p class="subsection">2.7.2 Default Values</p>
<p>Options can contain default values that apply to the option until
the
user has edited them through the UI. You can specify those values using
the <var>defaultValue</var> attribute. However, the type of option
will determine how the build model treats the value it finds associated
with the attribute. Options that define simple string values will pass
the value to the tool exactly as it is defined in the attribute. For
Boolean options, any value but the string <code>true</code> will be
treated as
false. List options treat all the defined list option values as
default,
and enumerated options search through the defined enumerated values for
the default.</p>
<p class="subsection">2.7.3 Option Commands</p>
<p>The values stored in the options are passed to build tools with
unique flags, depending on the compiler and the option. For example, an
option defining the paths a linker should search for libraries might
contain a large number of search paths, but each path is passed to the
linker with a <code>-L</code> flag. The <var>command</var> attribute
is used
to hold the actual flag to pass along with the option value.</p>
<p>The build model handles the value it finds associated with the
command attribute differently depending on the type of value the option
is managing based on the following heuristic. For string options, the
command is ignored since the contents of the option are treated as the
command. For enumerated options, the command associated with the
selected enumerated value is used, not the command defined in the
option. For Boolean options, the command is used if the option value is
set to true, otherwise it is ignored. For list options, the command is
applied to each element of the list.</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="148" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Option Value Type</p>
      </td>
      <td width="148" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Uses Default Value</p>
      </td>
      <td width="148" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Uses Command</p>
      </td>
      <td width="148" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>UI Element</p>
      </td>
    </tr>
    <tr>
      <td width="148" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>string</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Yes</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>No</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Entry widget</p>
      </td>
    </tr>
    <tr>
      <td width="148" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>boolean</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Yes</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Yes if true, else no</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Check box</p>
      </td>
    </tr>
    <tr>
      <td width="148" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>enumerated</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>No.</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>No.</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Drop-down list-box</p>
      </td>
    </tr>
    <tr>
      <td width="148" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>stringList</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>No.</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>Yes.</p>
      </td>
      <td width="148" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 110.7pt;">
      <p>List and button bar</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.7.4 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A unique identifier for the tool that will be used by the
build model.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>name</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Human-readable name for the tool to be used in the UI.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>valueType</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Type of value the option contains.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>category</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>This is the id of the option category for this option. The id
can be the id of the tool which is also a category.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p><span style="">defaultValue</span></p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Optionally specifies the value for the option if the user has
not edited it. For options containing a Boolean value, the string
&#8216;true&#8217; is treated as 1, any other value as 0.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>command</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>An optional value that specifies the actual command that will
be passed to the tool on the command line.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.7.5 Example</p>
<p>The example below shows the specification for the optimization level
option for a compiler. Note that it is an enumerated type, so the only
attributes defined for the option itself are its id for the build
model,
a human-readable name, the id of the category it belongs to, and the
type of value the option holds.</p>
<p><img style="border: 0px solid ; width: 316px; height: 392px;"
 src="images/image016.gif" title=""
 alt="An XML fragment containing some Option specifications"></p>
<p class="subsection"><a name="_TocSection2_8">2.8 Option Reference</a></p>
<p>An option reference always belongs to a tool reference, and is used
in two ways. First, the build model uses option references to hold onto
information the user has changed through the UI and to store it between
sessions. The second is to override the default option settings in a
configuration.</p>
<p>The reference identifies the option it overrides through the <var>id</var>
attribute. The <var>defaultValue</var> attribute
is used to hold onto the user entry, but it is used differently
depending on the <var>valueType</var> of the option. The attribute
contains the strings <code>true</code> or <code>false</code> for
Boolean options. String
options contain the data entered by the user. For enumerated options,
the attribute contains the selected enumerated list value. For list
options, this attribute is not used. Instead, <var>listOptionValues</var>
are used.</p>
<p class="subsection">2.8.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The unique identifier of the option that this is a reference
to.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>defaultValue</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>For boolean and string options, this field is used to hold the
value entered by the user. For enumerated options, it is used to hold
the selected enumerated option value. For list options, this attribute
is not used.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>command</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>unused in 1.2</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.8.2 Example</p>
<p>The example below shows how the build model saves overridden option
information in the project file. In this case, the tool reference is a
linker, and the option references are for linker flags and library
paths.</p>
<p><img style="border: 0px solid ; width: 533px; height: 87px;"
 src="images/image018.gif" title=""
 alt="An XML fragment containing an Option Reference specification"></p>
<p class="subsection"><a name="_TocSection2_9">2.9 List Option Value</a></p>
<p>Some options are best described using a list of values. This build
model element is used to define an individual element of a list option.
Typically, these options are populated by the user, not by the person
describing the option. However, if you define one or more values in
your
extension point, they will be displayed in the UI when the user edits
the build settings for the project. If the user modifies those
settings,
the overridden values will be stored by the build model and displayed
in
the UI.</p>
<p>There is an exception to this, however. Certain core functions in
the
CDT rely on the built-in parser to function correctly. In order to
return accurate values, the CDT parser must mimic (as closely as
possible) the preprocessor that ships with the tool chain used by the
target. Unfortunately, these tools often have a number of built-in
symbols and include paths that the user is never required to set, and
may be unaware even exist. In those cases, the implementer of the tool
chain must set those values in the tool definition and flag them by
setting the value of the <var>builtIn</var> attribute to true. Built
in
list option values are never shown to the user, and are only passed to
clients of the build model that specifically request them.</p>
<p class="subsection">2.9.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>builtIn</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>An optional Boolean field that tells the build model to treat
the value defined as read-only.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>value</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The contents of the list item. The build model will apply the
flag defined in the option to each value in the list.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.9.2 Example</p>
<p>The example below shows an option, <span style="font-style: italic;">Defined
Symbols</span>,
which
contains a pre-populated list of built-in values; <code>__I386__</code>,
and <code>__i386__</code> respectively.</p>
<p><img style="border: 0px solid ; width: 480px; height: 140px;"
 src="images/image020.gif" title=""
 alt="An XML fragment containing a List Option Value"></p>
<p class="subsection"><a name="_TocSection2_10">2.10 Enumerated Option
Value</a></p>
<p>Some options are best described as a single selection from a list of
choices. For example, users typically select the level of optimization
they want the compiler to apply when creating a build artifact. The
enumerate option value is used to define the elements of the list of
choices.</p>
<p>Each element of an enumerated option has a <var>name</var> that
will
be shown to the user in the UI. It also has a <var>command</var> which
should correspond to the command line option that gets passed to the
tool by the builder if this element is selected.</p>
<p>A default element can be indicated by setting the value of <var>isDefault</var>
to &#8216;true&#8217;. If the user has not overridden the selection in the UI, the
default element will be displayed. If no default is specified, the
first
element in the list is assumed to be the default and is displayed to
the
user.</p>
<p class="subsection">2.10.1 Schema</p>
<table border="1" cellspacing="0" cellpadding="0"
 style="border: medium none ; margin-left: 5.4pt; border-collapse: collapse;">
  <tbody>
    <tr>
      <td width="168" valign="top"
 style="border-style: double solid solid double; border-color: windowtext; border-width: 1.5pt 1pt 1pt 1.5pt; padding: 0in 5.4pt; width: 126.15pt;">
      <p>Attribute</p>
      </td>
      <td width="332" valign="top"
 style="border-style: double solid solid none; border-width: 1.5pt 1pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Description</p>
      </td>
      <td width="83" valign="top"
 style="border-style: double double solid none; border-width: 1.5pt 1.5pt 1pt medium; border-top: 1.5pt double windowtext; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>Required</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>id</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A unique identifier for the tool that will be used by the
build model.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>name</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>A descriptive name that will be displayed to the user in the
UI as one of the option values to select.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid solid double; border-width: medium 1pt 1pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>isDefault</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid solid none; border-width: medium 1pt 1pt medium; border-right: 1pt solid windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>Flags this enumerated value as the default to apply to the
option if the user has not changed the setting.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double solid none; border-width: medium 1.5pt 1pt medium; border-right: 1.5pt double windowtext; border-bottom: 1pt solid windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>no</p>
      </td>
    </tr>
    <tr>
      <td width="168" valign="top"
 style="border-style: none solid double double; border-width: medium 1pt 1.5pt 1.5pt; border-left: 1.5pt double windowtext; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 126.15pt;">
      <p>command</p>
      </td>
      <td width="332" valign="top"
 style="border-style: none solid double none; border-width: medium 1pt 1.5pt medium; border-right: 1pt solid windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 249.35pt;">
      <p>The command that the enumerated value translates to on the
command line.</p>
      </td>
      <td width="83" valign="top"
 style="border-style: none double double none; border-width: medium 1.5pt 1.5pt medium; border-right: 1.5pt double windowtext; border-bottom: 1.5pt double windowtext; padding: 0in 5.4pt; width: 61.9pt;">
      <p>yes</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="subsection">2.10.2 Example</p>
<p>The option below shows an enumerated option to flag the language
dialect for the Gnu preprocessor.</p>
<p><img style="border: 0px solid ; width: 449px; height: 168px;"
 src="images/image022.gif" title=""
 alt="An XML fragment containing an example of Enumerated Option Values"></p>
<p class="section"><a name="_TocSection3">3 UI Representation</a></p>
<p>In addition to controlling the way a project is built, the build
model also defines how the user interface will appear. There are two
principle ways a user interacts with the build settings model. The
first
is at project creation time through the New Project wizards, the second
is through the build settings property page.</p>
<p class="subsection"><a name="_TocSection3_1">3.1 New Project Wizard</a></p>
<p>The new project wizard relies on the target and configuration
settings from all specified tool chains to populate the list of choices
it
presents to the user. The figure below shows how the list of targets is
populated with any target whose <var>isTest</var> and <var>isAbstract</var>
attribute are set to <code>false</code>. The value of the target's <var>name</var>
attribute is
used to populate the drop-down list-box selection widget. Similarly,
the configuration
check list is populated with all the defined configurations associated
with the selected target. Note that the target selection widget is
labelled <span style="font-style: italic;">Platform</span> in the UI.
This will change in the next iteration of the build system as we
further refine the concept of host target and build target.<br>
</p>
<p><img style="border: 0px solid ; width: 488px; height: 566px;"
 src="images/image024.gif" title=""
 alt="New project wizard platform selection page"></p>
<h5>Figure 3 New project wizard</h5>
<p class="subsection"><a name="_TocSection3_2">3.2 Build Property Page</a></p>
<p>The contents of the build property page for a project are created by
examining the tools, option categories, and options defined for the
current configuration and target. In this section we will look at how
the user interface interprets the information in the build model to
display options to the user.</p>
<p>The configuration information pane of the build property page
consists of two -boxes. The first is populated with a list of all
targets that apply to the project. The second contains a list of
configurations that are defined for the target currently selected in
the
first. The figure below shows a project targeted solely at a Cygwin
executable, with two configurations &#8216;Release&#8217; (not shown), and &#8216;Debug&#8217;.
Note that the build settings model is queried for the target and
configuration <var>name</var> information.</p>
<p><img style="border: 0px solid ; width: 574px; height: 288px;"
 src="images/image026.gif" title=""
 alt="Project property page configuration selection/edit area"></p>
<h5>Figure 4 Configuration selection</h5>
<p>Users change the build settings for options associated with
categories and tools. The UI relies on the information in the build
settings model for that information. The figure below shows how the
tool
list, displayed in a tree view, is populated. Tools are the root
elements of the tree. Categories are displayed as leaves of the tool
they belong to. In both cases, the name defined in the plug-in manifest
is used as the text of the tree elements. Note that the tool uses an
externalized string to identify its name to help internationalize a
tool
specification, but this is not necessary.</p>
<p><img style="border: 0px solid ; width: 575px; height: 413px;"
 src="images/image028.gif" title=""
 alt="Project property page tool selection area"></p>
<h5>Figure 5 Tools and option category display</h5>
<p>As mentioned in the discussion of the build settings model, options
know what type of data they manage. Different option types require
different UI widgets to properly represent that data to the user. The
figure below shows what UI elements are created for each type of option.</p>
<p>The Compiler Flags option contains a <var>string</var> option. In
this example, the option is intended to be the place the user enters
all
those extra flags that are not defined anywhere else in the property
page. Options containing strings display their contents in a simple
entry widget.</p>
<p>The Optimization Level option is an <var>enumerated</var> option.
These types of options force the user to select a single value from a
list of possible choices. Note that the <var>name</var> of the option
is
applied to the label in the UI, whereas the <var>name</var> of each
individual <var>enumeratedOptionValue</var> element is used to
populate
the list.</p>
<p>The Include Paths option is a special case of a <var>stringList</var>
option. The contents of this option are left undefined in this example,
so
the user sees an empty list. However, all list options are displayed in
a list control with an associated button bar for adding, removing, and
reordering list elements. Note that the <var>optionType</var>
attribute
is set to <code>includePath</code>. This notifies the build system
that
it must pay special attention to the values entered in this option.
There are clients of this information in the CDT that will query the
build system for this information, and this is currently the only way
to
flag these values as special.</p>
<p><img style="border: 0px solid ; width: 575px; height: 497px;"
 src="images/image030.gif" title=""
 alt="Project property page option edit area"></p>
<h5>Figure 6 Option display</h5>
<p>Finally Verbose, a Boolean option, is displayed as a check-box.
Since
the default value for this option is defined as <code>false</code>,
the
check-box is left unselected when it is created.</p>
<p>Note that the UI actually builds itself <span
 style="font-style: italic;">on the fly</span> based on
the options descriptions in the plug-in manifest. The order of the
options is the basis of the page layout. If the layout is not
satisfactory, you must edit the plug-in file itself. You must then
restart the workspace after editing the manifest for your changes to
take effect in the UI.</p>
<p class="section"><a name="_TocSection4">4 Makefile Generator</a></p>
<p>The third key element of the managed build system is the makefile
generator. The makefile generator is one of the key clients of the
information stored in the build settings model. The best way to
understand how the makefile generator works is to look at a real
project. The figure below shows the project that we will be using for
the purposes of this discussion. The source for the project is spread
over the directories <code>source1/</code>, <code>source2/</code>,
and <code>source2/source21</code>.
Header files are located in 2 locations; <code>headers/</code>, and <code>source2/source21</code>.</p>
<p><img style="border: 0px solid ; width: 332px; height: 349px;"
 src="images/image032.gif" title="" alt="Example project"></p>
<h5>Figure 7 Example project source files</h5>
<p>While simple, this example illustrates some of the problems projects
using <span style="font-style: italic;">make</span> typically face
when source files are organized
hierarchically. One approach to these types of problems is to generate
a
makefile for each subdirectory, then call make recursively, culminating
in the final build step which, in theory, brings all of the build
results together.</p>
<p>The problem with managing this type of approach lies in
understanding
the dependencies and handling them properly when the makefiles are
generated. In order for this to happen, all the dependencies have to be
properly specified and complete. As long as there are no dependencies
between resources in different subdirectories, the makefiles in a
recursive approach will contain a properly partitioned set of
dependencies. However, in a more realistic project organization, the
fragmentary makefiles will have incomplete representations of the
dependencies. In order to correct for this, we would have to do some of
the work that <span style="font-style: italic;">make</span> gives us
for free.</p>
<p>The approach the makefile generator takes is to use a single
makefile
to build the entire project. To keep the makefile manageable and
readable, the makefile generator creates makefile and dependency file
fragments for each subdirectory of the project that contributes source
code, and uses the include capability of <span
 style="font-style: italic;">make</span> to bring them all
together.</p>
<p>The figure below shows the makefile, makefile fragments, and
dependency fragments that are generated for the project.</p>
<p><img style="border: 0px solid ; width: 359px; height: 494px;"
 src="images/image034.gif" title=""
 alt="Example project generated files"></p>
<h5>Figure 8 Generated makefiles</h5>
<p>In the next sections, we will examine the makefiles that are
generated in more detail.</p>
<p class="subsection"><a name="_TocSection4_1">4.1 Main Makefile</a></p>
<p>There is one main makefile generated for a project. Based on
information for the target, the proper clean command is defined as a
macro. Note that for efficiency, the contents of macros are calculated
only when they are defined or modified, thus all assignment operators
are generated as &#8216;:=&#8217; or &#8216;+=&#8217; with the exception of the list of objects.</p>
<p>The makefile defines the macros that hold the list of build sources,
but they are populated in the makefile fragments. It also contains a
list of subdirectories that contribute source files to the build. The
makefile generator will generate fragmentary makefiles for each of the
directories, so the main makefile must include each of these fragments.</p>
<p><img src="images/image036.gif" title="" alt="Generated main makefile"
 style="border: 0px solid ; width: 636px; height: 465px;"></p>
<p>This makefile is passed as an argument to <span
 style="font-style: italic;">make</span>, so it
contains
the real build target, along with <span style="font-style: italic;">clean</span>
and <span style="font-style: italic;">all</span>
targets.
Finally, the makefile generator will calculate dependencies for each of
the source files in the build, and generate these into a dependency
fragment for each subdirectory. The main makefile includes each of the
fragments as well.</p>
<p class="subsection"><a name="_TocSection4_2">4.2 Makefile Fragments</a></p>
<p>Obviously, the makefile we just looked at is incomplete. There are
no
rules for building actual source files, and no source files listed.
However, the makefile generator places that information into makefile
fragments for each subdirectory contributing source to the build. The
figure below shows what the fragment for the <code>source1/</code>
subdirectory looks like.</p>
<p><img style="border: 0px solid ; width: 635px; height: 279px;"
 src="images/image038.gif" title="" alt="Generated fragment makefile"></p>
<p>The fragment contributes one file, <code>class1.cpp</code>, and a
rule to build all source files with the &#8216;cpp&#8217; extension. The content of
the dependency and command lines is derived from the build settings
model. For the dependency line, the makefile generator asks the build
model if there are any tools that build files with a particular
extension. If so, the tool is asked for the extension of the output.
For
the command line, the tool that builds for the extension supplies the
actual command, while the options for the tool supply the arguments to
pass to it.</p>
<p class="subsection"><a name="_TocSection4_3">4.3 Dependency Makefile
Fragments</a></p>
<p>There is one final piece to the puzzle, and that is a list of
dependencies for each source file in the build. Recall that <span
 style="font-style: italic;">make</span>
will rebuild any file that is out of date in its dependency graph, but
it only adds the dependency to the graph if it is explicitly told to do
so. Thus, it is the responsibility of the makefile generator to
completely describe all dependencies for <span
 style="font-style: italic;">make</span>. Consider the
dependencies of the final build target to <span
 style="font-style: italic;">Class1</span>, as shown in
the
graph above. We can see that <span style="font-style: italic;">make</span>
will need to rebuild <code>Class1.o</code>
if <code>Class1.cpp, Class1.h</code> or <code>Class2.h</code>
changes.
In the makefile fragment, we have only defined a dependency between
files with an &#8216;o&#8217; and a &#8216;cpp&#8217; extension.</p>
<p>The makefile generator places the remaining, explicit dependencies
in
a separate makefile fragment for each subdirectory. The figure below
shows the fragment for the <code>source1/</code> subdirectory.</p>
<p><img style="border: 0px solid ; width: 449px; height: 61px;"
 src="images/image040.gif" title=""
 alt="Generated dependency makefile fragment"></p>
<p class="subsection"><a name="_TocSection4_4">4.4 Inter-Project
Dependencies</a></p>
<p>A project may reference one or more additional projects in the
workspace. The makefile generator attempts to generate these
dependencies in two ways. First, the makefile must have a dependency on
the build goal of the referenced project in the main target, and it
must
include instructions for building those targets as a separate rule.</p>
<p>For the remainder of this discussion, let us consider the following
basic scenario. Project A builds an executable, <code>a.exe</code>. It
references project B which builds a library <code>libB.a</code>. The
main build target in the makefile for project A would be generated with
the output of project B as a dependency.</p>
<p><img style="border: 0px solid ; width: 605px; height: 101px;"
 src="images/image042.gif" title=""
 alt="Generated inter-project dependency target"></p>
<p>As you can see from the generated makefile above, the rule for the
target <code>A.exe</code> will be evaluated if the output of B has
changed. This works well if the output of project B can be determined.
However, that is only the case when project B is managed. Standard make
projects do not know what the output of their build step is since that
information is encoded in the makefile. If project A references a
standard project, it will not have an explicit dependency on the output
of that project.</p>
<p>The second element of the inter-project dependency is the rule to
build the dependent project. This is generated as part of the <code>deps</code>
target to ensure that the output of B is up-to-date when A is built.
The
rule to build the referenced project is simply a command to change to
the appropriate build directory of the referenced project and call make
again. Note that <code>$(MAKE)</code> will evaluate to the same
invocation that was used to build the main project including the flags
that were passed to it.</p>
<p class="section"><a name="_TocSection5">5 Tutorial: An Example Tool
Chain</a></p>
<p>New managed build system tool chains are specified by extending the <code>ManagedBuildInfo</code>
extension point defined in the <code>org.eclipse.cdt.managedbuilder.core</code>
plug-in. The easiest way to do this is to create a new plug-in project
and add your own definitions there.</p>
<p class="subsection"><a name="_TocSection5_1">5.1 Setting up your
Environment</a></p>
<p>If you are starting with a clean environment, you will need to
import
the plug-ins <code>org.eclipse.cdt.core</code>, <code>org.eclipse.cdt.make.ui</code>,
and <code>org.eclipse.cdt.managedbuilder.ui</code> (and any plug-ins
they require) into your run-time workbench instance by performing the
steps below. If you already have the required plug-ins in your
workbench
instance, proceed to the section "Creating your plug-in project".</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>From the resource perspective, use <span
 style="font-weight: bold;">File &gt; Import... &gt;
External Plug-ins and Fragments</span>.</li>
  <li>Continue clicking on the <span style="font-weight: bold;">Next
&gt;</span> button until you get
to the screen called <span style="font-weight: bold;">Selection</span>.
This screen will contain a list
of all of the plug-ins in your host workbench instance.</li>
  <li>Select <code>org.eclipse.cdt.core</code>, <code>org.eclipse.cdt.make.ui</code>,
and <code>org.eclipse.cdt.managedbuilder.ui</code> from the list and
then click the button <span style="font-weight: bold;">Add Required
Plug-ins</span>.</li>
  <li>Click on the <span style="font-weight: bold;">Finish</span>
button. Your Navigator view should
contain the selected plug-ins and all of the plug-ins they require.</li>
</ol>
<p class="subsection"><a name="_TocSection5_2">5.2 Creating your
Plug-in
Project</a></p>
<p>You will need to create a project to add your tool chain
definition. Technically the extension can be defined in any plug-in
manifest,
but
for this tutorial we will create a new, empty plug-in project with an
empty plug-in manifest file.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Open the <span style="font-weight: bold;">New Project... </span>wizard
(<span style="font-weight: bold;">File &gt; New &gt; Project...</span>),
choose <span style="font-weight: bold;">Plug-in Project</span>
from the <span style="font-weight: bold;">Plug-in Development</span>
category and click the <span style="font-weight: bold;">Next &gt;</span>
button. <br>
  </li>
  <li>On the <span style="font-weight: bold;">Plug-in Project Name</span>
page, use <code>org.eclipse.cdt.example.toolchain</code>
as the name for your project, and click the <span
 style="font-weight: bold;">Next &gt;</span> button. <br>
  </li>
  <li>On the <span style="font-weight: bold;">Plug-in Project
Structure Page</span> you will see that the wizard has set the id to <code>org.eclipse.cdt.example.toolchain</code>
by default. We are going to be defining the tool chain in the
plug-in manifest file without writing any code, so choose the <span
 style="font-weight: bold;">Create a
simple project</span> radio button and click on the <span
 style="font-weight: bold;">Finish</span> button.</li>
  <li>If asked if you would like to switch to the <span
 style="font-weight: bold;">Plug-in
Development</span> perspective, answer <span style="font-weight: bold;">Yes</span>.</li>
</ol>
<p class="subsection"><a name="_TocSection5_3">5.3 Creating the
Extension</a></p>
<p>You have added the required plug-ins to your workspace instance and
you have a brand new project with an empty manifest file. We are now
ready to add our tool chain definition to the managed build system by
extending the <code>ManagedBuildInfo</code> extension point.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Double click on the <code>org.eclipse.cdt.example.toolchain</code>
project in the <span style="font-weight: bold;">Package Explorer</span>
to expand it. Double click on
the <span style="font-weight: bold;">plugin.xml</span> file to edit
its contents.</li>
  <li>We have to add a dependency between our project and the <code>org.eclipse.cdt.managedbuilder.core</code>
plug-in where the extension point is defined. Click on the <b>Dependencies</b>
tab located along the bottom of the manifest editor. Click the <span
 style="font-weight: bold;">Add&#8230;</span> button located beside the <span
 style="font-weight: bold;">Required Plug-Ins</span>
list. Select <code>org.eclipse.cdt.managedbuilder.core</code> from the
list and then click the <span style="font-weight: bold;">Finish</span>
button.</li>
  <li>Select the <span style="font-weight: bold;">Extensions</span>
tab located along the bottom of the
manifest editor. Click the <span style="font-weight: bold;">Add&#8230;</span>
button located beside the <span style="font-weight: bold;">All
Extensions</span> list. Make sure that <span style="font-weight: bold;">Generic
Wizards</span> is selected
in the left-hand list, and <span style="font-weight: bold;">Schema-based
Extensions</span> from the
right, and then click the <span style="font-weight: bold;">Next &gt;</span>
button.</li>
  <li>You should now be on the <span style="font-weight: bold;">Extension
Point Selection</span> page. Make
sure that the <span style="font-weight: bold;">Show only extension
points from the required plug-ins</span>
check-box is selected. Select <code>org.eclipse.cdt.managedbuilder.core.ManagedBuildInfo</code>
from the list of extension points. Use <code>org.eclipse.cdt.example.toolchain</code>
as the <span style="font-weight: bold;">Point ID</span> for the
extension, and <code>Example Tool Chain</code>
for the <span style="font-weight: bold;">Point Name</span>. Click the <span
 style="font-weight: bold;">Finish</span> button.</li>
</ol>
<p class="subsection"><a name="_TocSection5_4">5.4 Adding a Target</a></p>
<p>Now we will add a new target, configuration, and an example tool to
the extension.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Right click on <code>org.eclipse.cdt.managedbuilder.core.ManagedBuildInfo</code>
to access the context menu. Select <span style="font-weight: bold;">New
&gt; target</span> to add a
target definition. A new target named <code>org.eclipse.cdt.example.toolchain.target[n]</code>
should appear below the extension point. Right click on the new target
to access the context menu and select <span style="font-weight: bold;">Properties</span>
to open the
properties editor for the new entry.</li>
  <li>Let&#8217;s give the new target a better name. Locate the <span
 style="font-weight: bold;">name</span>
property in the <span style="font-weight: bold;">Properties</span>
browser and click on the row to edit
the value of the property. For now, let&#8217;s use the name <code>Example
Executable</code> for our target.</li>
  <li>Set the value of the binary parser property based on the platform
you will be using to create your example projects on. For example, if
you
are running this tutorial on Linux or Solaris, enter the value <code>org.eclipse.cdt.core.ELF</code>.
If you are running the tutorial on Windows, enter the value <code>org.eclipse.cdt.core.PE</code>.</li>
  <li>Now set the clean command for the target. For the purposes of
this example, click on the <span style="font-weight: bold;">cleanCommand</span>
property to edit it and
enter <code>rm &#8211;f</code>.</li>
  <li>Do the same for the make command. Locate the <span
 style="font-weight: bold;">makeCommand</span>
property, click on it to edit the value, and enter <code>make</code>.</li>
  <li>We want the new target to appear when we run the new project
wizard on our host platform, so we have to define the operating systems
that the target should be visible on. Locate the <span
 style="font-weight: bold;">osList</span>
property and click it to edit the value. Enter <code>win32</code> if
you are running the tutorial on Windows, <code>linux</code> if you are
running on one of the Linux distributions, or <code>solaris</code> if
you are running on a version of Solaris.</li>
</ol>
<p class="subsection"><a name="_TocSection5_5">5.5 Adding a
Configuration</a></p>
<p>We have now added a basic target definition. We now want to define a
default configuration. Normally, you would consider defining both a
release
and debug configuration, but we want to keep this example simple so we
will restrict ourselves to a single configuration.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Right click on <span style="font-weight: bold;">Example
Executable</span> in the <span style="font-weight: bold;">All
Extensions</span> list. From the context menu select <span
 style="font-weight: bold;">New &gt;
configuration</span>. Click on the new configuration to bring up its
properties in the property browser.</li>
  <li>Click on the <span style="font-weight: bold;">name</span>
property and edit the value to be <code>Test
Configuration</code>.</li>
</ol>
<p class="subsection"><a name="_TocSection5_6">5.6 Adding a Tool</a></p>
<p>We could now run the new project wizard and create a new managed
project based on this target, but before we do that, let&#8217;s define a
tool
for the target.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Right click on <span style="font-weight: bold;">Example
Executable</span> to get the context menu
and select <span style="font-weight: bold;">New &gt; tool</span>. Give
the tool the name <code>Compiler</code>.</li>
  <li>Tools declare which file extensions they operate on and,
optionally, the file extensions they produce. Our imaginary compiler
only works on files with a &#8216;c&#8217; or &#8216;C&#8217; extension. Locate the <span
 style="font-weight: bold;">sources</span>
property and set its contents to be a comma-separated list containing <code>c,C</code>.
Note that there should not be any spaces between the values. Let us
assume that the output of the compiler is an object module that has the
extension &#8216;o&#8217;. Set the value of the <span style="font-weight: bold;">outputs</span>
property of the
tool to <code>o</code>.</li>
  <li>Let us assume that the tool should appear for both C and C++
projects, although this is not always the case. Locate the <span
 style="font-weight: bold;">natureFilter</span>
property and select <code>both</code> from the list of choices.</li>
  <li>The build model needs to know if there are any special file
extensions that indicate a file is a &#8216;header&#8217; file. Set the <span
 style="font-weight: bold;">headersExtension</span>
property to be a comma-separated list containing <code>h,H</code>.</li>
  <li>Tools often have a flag to specify the output of a tool. For the
purposes of this example, set the <span style="font-weight: bold;">outputFlag</span>
property to <code>-o</code>.</li>
  <li>Finally, we want to specify the command that is needed to invoke
the tool. For this example, we are not interested in actually calling a
real tool, so just enter <code>ccc</code> as the value for the <span
 style="font-weight: bold;">command</span>
property.</li>
</ol>
<p class="subsection"><a name="_TocSection5_7">5.7 Testing the Target</a></p>
<p>We have now defined enough information to create a project for our
new example target, so let&#8217;s go test it out.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Make sure our example project is selected in the <span
 style="font-weight: bold;">Package
Explorer</span>. Select <span style="font-weight: bold;">Run &gt;
Debug As &gt; Run-time Workbench</span>
to start a new run-time workbench instance that includes the new tool
information you have created. You may be prompted to save the resource
you were editing. If prompted, answer <span style="font-weight: bold;">Yes</span>.<br>
  </li>
  <li>In the new workspace, open the <span style="font-weight: bold;">C/C++
Development Perspective</span>.</li>
  <li>Run the new project wizard. From the Selection page choose either
a managed C or C++ project. Click the <span style="font-weight: bold;">Next
&gt;</span> button, give
your project any name you wish, and click <span
 style="font-weight: bold;">Next &gt;</span> again.
Note, if the wizard does not display a next button, you have probably
forgotten to specify the make and clean commands. You will have to add
this information to the tool chain definition and restart your
debugging session.</li>
  <li>You should now be at the <span style="font-weight: bold;">Select
a Target</span> page. Your new
target will appear as a choice in the <span style="font-weight: bold;">Platform</span>
selection
widget. Select it and note that the list of available configurations
now contains the single configuration we defined for the target. Click <span
 style="font-weight: bold;">Finish</span>.<br>
  </li>
  <li>Right click on your new project in the <span
 style="font-weight: bold;">Navigator</span> or <span
 style="font-weight: bold;">C/C++
Project</span> view to access the context menu, and select <span
 style="font-weight: bold;">Properties</span>
to open the property browser for the project. Select <span
 style="font-weight: bold;">C/C++ Build</span>
from the choices and note that the tool we defined appears in the list.</li>
</ol>
<p>At this point, you have no doubt noticed that the property page does
not have any way to edit the settings for the tool. That is because we
have not defined any options yet. It is time to edit the tool chain
definition again.</p>
<p class="subsection"><a name="_TocSection5_8">5.8 Adding Tool Options</a></p>
<p>Users expect to be able to change the settings for their build tools
through the property page for a project. What they see is controlled by
the way options are defined in the tool chain specification. We will
create an option category, and then add two example options to it.</p>
<ol style="margin-top: 0in;" start="1" type="1">
  <li>Switch back to the <span style="font-weight: bold;">Plug-in
Development</span> perspective. Right
click on the <code>Compiler</code> entry in the extension description
to bring up the context menu. Select <span style="font-weight: bold;">New
&gt; optionCategory</span> to
add the category. Set the <span style="font-weight: bold;">name</span>
of the category to <code>General</code>.</li>
  <li>You must specify the id of the tool the category belongs to in
the <span style="font-weight: bold;">owner</span> property. The
simplest way to do this is to copy the <span style="font-weight: bold;">id</span>
from the compiler and paste it into the <span
 style="font-weight: bold;">owner</span> property of the
category. Click on the <code>Compiler</code> entry to open its
properties. Right click on the <span style="font-weight: bold;">id</span>
property as though you were
going to edit it. Instead of typing, hit <span
 style="font-weight: bold;">ctrl-c</span>. Switch back to
the option category, right click the <span style="font-weight: bold;">owner</span>
property and hit <span style="font-weight: bold;">ctrl-v</span>.</li>
  <li>Set the unique id of the category to anything you want, for
example <code>example.toolchain.cat.comp</code>.</li>
  <li>Right click on the tool, not the category, to bring up its
context menu and select <span style="font-weight: bold;">New &gt;
option</span> to add our first
option. Name the option <code>Include paths</code> and set the <span
 style="font-weight: bold;">valueType</span>
property to <code>includePath</code> from the list of choices. Please
refer to section 2.7 for a description of value types and options. In
the <span style="font-weight: bold;">command</span> property, enter <code>-I</code>.
In the <span style="font-weight: bold;">category</span>
property, put the unique id of the category that you entered in step 3.</li>
  <li>Add another option to the compiler. Set its name to <code>Other
flags</code>. Set its <span style="font-weight: bold;">valueType</span>
to <code>string</code>, its <span style="font-weight: bold;">category</span>
to be the id you created in step 3, and its <span
 style="font-weight: bold;">defaultValue</span> to <code>-c</code>.</li>
</ol>
<p>At this point, you can test how your options appear in the UI by
debugging your run-time workbench. You should see something like this.</p>
<p><img style="border: 0px solid ; width: 400px; height: 294px;"
 src="images/image044.gif" title="" alt="Tutorial project property page"></p>
<h5>Figure 9 Property page with tool and category</h5>
<p class="subsection"><a name="_TocSection5_9">5.9 Taking the Next Step</a></p>
<p>The purpose of the tutorial you just followed was to become familiar
with the steps involved in creating a simple tool chain, and to get a
feeling for how the choices you make in the specification of options
affect the UI. In this section, we will discuss some additional points
that you need to consider before specifying your own tool chain.</p>
<p class="subsection">5.9.1 Adding More Tools</p>
<p>Unless you just happen to have a compiler on your system that is
invoked with &#8216;ccc&#8217;, the example tool we created is not going to build
anything. Further, the tool we defined transforms source files into
object files. Another tool, like a linker, would be needed to transform
those object files into a final build goal. For most targets, defining
a
compiler and &#8220;something else&#8221; is usually sufficient, but you may have
to
define additional tools if your tool chain requires intermediate build
steps to function properly.</p>
<p class="subsection">5.9.2 Defined Symbols and Header File Search Paths</p>
<p>There are elements of the CDT core that require build information to
function properly. Things like the indexing service, search, or
code-assist will only function correctly if the built-in parser can
retrieve information about the paths to search for include files and
the
preprocessor symbols defined for the project. The build model only
promises to store the type and value of an option, it does not know
anything about the contents. However, you can flag certain options as
special so the build model will know to pay special attention to them.
As the implementer of the tool chain, you should make sure your
specification has options of type &#8220;includePaths&#8221; and &#8220;definedSymbols&#8221;.
The build model will pay special attention to these options and answer
them to the appropriate clients in the CDT core without any further
intervention on your part.</p>
<p class="subsection">5.9.3 Built-in Symbols and Search Paths</p>
<p>Every compiler relies on having a correct set of preprocessor
symbols
and header file search paths to perform proper builds. Even compiler
from the same vendor may use different symbols and search paths when
building for different operating systems. Some of these values may be
defined by the user, but others will be built into the tools themselves
so the user will be unaware of them. Unfortunately, the CDT parser
needs
to know about the entire set to properly parse source files.</p>
<p>There are two approaches you can take, but both involve
pre-populating the include path and defined symbol options with list
option values containing the correct information. If you add a value to
the include path or symbol option, it will be displayed to the user by
default. This may be the right approach to take if you believe that
users will change these values frequently. However, it will clutter the
UI with values and since they are editable, users may delete them
accidentally.</p>
<p>The alternative is to flag the list option value as a built-in
value.
In this case, the user will not be able to edit the values through the
UI. This has the advantage of keeping the UI cleaner, but the only way
for the user to edit these values if something changes is to directly
edit the plug-in manifest where the extension is specified.</p>
<p>The CDT team is currently developing a mechanism to specify this
information in an extensible way. In the current release however, we
are
relying on the implementers of a tool chain to supply the default
symbols and paths in their specification. Please refer to section 2.9
for more details on specifying list option values.</p>
<p class="subsection">5.9.4 User-Specified Libraries and Object Modules</p>
<p>Similarly, a user may want to specify external libraries to link
against in the final build step. The build model needs to be told to
pay
special attention to an option containing libraries so that when the
makefile generator requests them, it can answer a valid list. Flag the
option value type as &#8220;libs&#8221; for external libraries or &#8220;userObjs&#8221; for
object modules.</p>
<p class="subsection">5.9.5 Target Hierarchies</p>
<p>One area of the build model that the tutorial does not touch on is
the concept of abstract targets discussed in section 2.2.1. It would be
quite time consuming, not to mention error prone, if you had to
redefine
common tools or properties each time you wanted to create a new target.
Instead, the build model allows you to organize targets into
hierarchies
that promote the sharing of common property settings and tools between
related targets. When you create a parent target though, you may not
want that target to be selected by the user in the new project wizard.
In that case, make the target abstract and it will no longer appear as
an option for users. Flagging a target as abstract is a UI design
decision; you can declare a non-abstract target as the parent of
another
target. You just have to be sure that you want the user to be able to
create a new project based on the parent as well as the child.
</p>
<p class="subsection">5.9.6 Publishing your Plug-in</p>
<p>The subject of packaging Eclipse plug-ins is well covered in the <span
 style="font-style: italic;">Platform Plug-in Developer Guide</span>.
It is strongly recommended that you review this information carefully
if you plan on deploying products based on Eclipse. However, making
your tool-chain specification available to other users of Eclipse is
not difficult. You must supply the plugin manifest we created inside
the Eclipse platform's plug-in directory. The plug-in directory is
named <span style="font-weight: bold;">plugins</span> and is typically
located underneath the main directory where you installed the Eclipse
platform.
</p>
<ol>
  <li>From the <span style="font-weight: bold;">Plug-in Development
Perspective</span>, select the <span style="font-weight: bold;">plugin.xml</span>
file for your plug-in in the package explorer. Open the <span
 style="font-weight: bold;">File &gt; Export...</span> wizard. On the <span
 style="font-weight: bold;">Select </span>page, chose <span
 style="font-weight: bold;">File system</span> from the export
destination list. Click the <span style="font-weight: bold;">Next &gt;</span>
button. </li>
  <li>Make sure that <code>org.eclipse.cdt.example.toolchain</code> is
selected in the left-hand list and that only <span
 style="font-weight: bold;">plugin.xml</span> is selected in the right.
To select an export destination, click the <span
 style="font-weight: bold;">Browse...</span> button beside the entry
widget labelled <span style="font-weight: bold;">To directory</span>.
Browse to the <span style="font-weight: bold;">plugins</span>
subdirectory of your Eclipse installation. Click the Finish
button.</li>
  <li>Restart Eclipse, switch to the <span style="font-weight: bold;">C/C++
Development Perspective</span> and run the new project wizard to create
a new project based on your tool-chain specification. </li>
</ol>
</body>
</html>

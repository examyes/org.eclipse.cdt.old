<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>CDT Refactoring Feature Spec</title>
  <meta name="author" content="Doug Schaefer">
</head>
<body>
<h1>CDT Refactoring Feature Spec<br>
<small>For CDT Release 2.0</small><br>
</h1>
<p>Refactoring has been popularized by a number of text books and by
the implementation of a number of refactorings in the Eclipse JDT.
Refactoring is seen as a great productivity enhancer in support of
editing the source files in a project.<br>
</p>
<p>What is refactoring? Refactoring is essentially a high level source
edit function. It often involves edits in multiple locations in a file
and across multiple files.<br>
</p>
<h2>Requirements<br>
<small style="font-weight: normal; font-style: italic;"><small>What
does the feature do?</small></small><br>
</h2>
<p>This feature can be described with two areas. First there is a set
of different refactoring operations that can be performed. Second there
is a common set of requirements that all operations need to include.<br>
</p>
<p>The following refactorings shall be supported (priorities in square
brackets):<br>
</p>
<ul>
  <li>[P1] Rename of C Model Elements - the ability to change the name
of a C Model Element and have all references to that identifier updated
to reflect the new name.</li>
  <li>[P3] Rename of identifiers selected in the editor - the ability
to run the rename refactor from the editor based on selection.<br>
  </li>
  <li>[P2] Move of C Model Elements owned by Files - this basically
means moving top level elements from one file to another using the
C/C++ Projects View or Outline View.</li>
  <ul>
    <li>[P3] Update the inclusions to the references if necessary to
ensure successful build.</li>
    <li>[P4] Update project references for cross project moves.<br>
    </li>
  </ul>
  <li>[P3] Move of Type Members - the ability to move members, e.g.
member variables and member functions, from one type to another.</li>
</ul>
<p>The common refactoring requirements are as follows:<br>
</p>
<ul>
  <li>[P1] Undo - it shall be possible to undo a refactor operation.
Care must be taken to ensure the refactoring operation can be undone
after a number of edits on the affected files (it is fine if that
number is one to start). This will allow the user to do a build/debug
cycle to ensure the refactor worked correctly and then undo the changes
if it didn't.</li>
  <li>[P1] Preview - before carrying out a refactoring operation, the
option shall be provided to preview the changes that will be carried
out by that operation. The option to cancel or edit the result of the
operation shall then be provided. This is similar (if not identical) to
the preview functionality in the JDT.</li>
</ul>
<p>That should be enough for the first release and give us the ability
to test out the refactoring engine.<br>
</p>
<h2>Architecture Notes<br>
<small style="font-weight: normal; font-style: italic;"><small>Guidelines
the design should follow</small></small><br>
</h2>
<p>Refactoring already has an implementation in the JDT. The
rafactoring engine there is large and not all of it may be necessary in
the first release.&nbsp; However, it is certainly a good source of
ideas, if not code.<br>
</p>
<p>Rename refactoring is probably best implemented reusing the C/C++
Search feature to find references that need to be updated. To ensure
valid results, the accuracy of the search, indexer, and parser is
critical.<br>
</p>
<h2>Design Notes<br>
<small style="font-weight: normal; font-style: italic;"><small>How is
the feature implemented</small></small><br>
</h2>
<p>None at this time.<br>
</p>
<br>
</body>
</html>
